<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compact Node Grid</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #1E1E2E;
        }
        
        .grid-container {
            position: relative;
            width: 600px;
            height: 300px;
            border: 1px solid rgba(92, 187, 246, 0.2);
            overflow: hidden;
            background-color: rgba(24, 24, 37, 0.8);
        }
        
        .node-grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .node {
            position: absolute;
            width: 3px;
            height: 3px;
            background-color: rgba(92, 187, 246, 0.5);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: transform 0.15s ease, background-color 0.15s ease;
        }
        
        .node.active {
            background-color: rgba(255, 95, 86, 0.8);
            box-shadow: 0 0 5px rgba(255, 95, 86, 0.5);
        }
    </style>
</head>
<body>
    <div class="grid-container">
        <div class="node-grid" id="nodeGrid"></div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const nodeGrid = document.getElementById('nodeGrid');
            const gridContainer = document.querySelector('.grid-container');
            
            // Configurazione
            const nodeSpacing = 15; // Spazio ridotto tra i nodi
            const magnifierRadius = 50; // Raggio dell'area di ingrandimento
            const magnificationFactor = 2.5; // Fattore di ingrandimento
            
            let nodes = [];
            let gridWidth, gridHeight;
            
            // Funzione per creare la griglia
            function createGrid() {
                // Pulisci la griglia esistente
                nodeGrid.innerHTML = '';
                nodes = [];
                
                // Ottieni le dimensioni del contenitore
                gridWidth = gridContainer.clientWidth;
                gridHeight = gridContainer.clientHeight;
                
                // Calcola il numero di nodi orizzontali e verticali
                const numCols = Math.floor(gridWidth / nodeSpacing) + 1;
                const numRows = Math.floor(gridHeight / nodeSpacing) + 1;
                
                // Crea i nodi
                for (let i = 0; i < numRows; i++) {
                    for (let j = 0; j < numCols; j++) {
                        const x = j * nodeSpacing;
                        const y = i * nodeSpacing;
                        
                        const node = document.createElement('div');
                        node.className = 'node';
                        node.style.left = `${x}px`;
                        node.style.top = `${y}px`;
                        
                        // Aggiungi un po' di casualità alla dimensione dei nodi
                        const randomSize = 1.5 + Math.random() * 2;
                        node.style.width = `${randomSize}px`;
                        node.style.height = `${randomSize}px`;
                        
                        // Aggiungi un po' di casualità all'opacità
                        const randomOpacity = 0.3 + Math.random() * 0.7;
                        node.style.backgroundColor = `rgba(92, 187, 246, ${randomOpacity})`;
                        
                        nodeGrid.appendChild(node);
                        
                        // Memorizza il nodo e la sua posizione originale
                        nodes.push({
                            element: node,
                            x: x,
                            y: y,
                            size: randomSize
                        });
                    }
                }
            }
            
            // Funzione per gestire il movimento del mouse
            function handleMouseMove(e) {
                const rect = gridContainer.getBoundingClientRect();
                const mouseX = e.clientX - rect.left;
                const mouseY = e.clientY - rect.top;
                
                // Aggiorna la posizione di ogni nodo
                nodes.forEach(node => {
                    const dx = mouseX - node.x;
                    const dy = mouseY - node.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    // Se il nodo è all'interno del raggio del magnifier
                    if (distance < magnifierRadius) {
                        // Calcola il fattore di scala basato sulla distanza
                        const scale = 1 + (magnificationFactor - 1) * (1 - distance / magnifierRadius);
                        
                        // Calcola la nuova posizione
                        const distanceRatio = distance / magnifierRadius;
                        const translateX = dx * (1 - distanceRatio) * 0.3;
                        const translateY = dy * (1 - distanceRatio) * 0.3;
                        
                        // Applica la trasformazione
                        node.element.style.transform = `translate(calc(-50% + ${translateX}px), calc(-50% + ${translateY}px)) scale(${scale})`;
                        node.element.classList.add('active');
                    } else {
                        // Ripristina la posizione originale
                        node.element.style.transform = 'translate(-50%, -50%)';
                        node.element.classList.remove('active');
                    }
                });
            }
            
            // Funzione per gestire l'uscita del mouse
            function handleMouseLeave() {
                // Ripristina tutti i nodi
                nodes.forEach(node => {
                    node.element.style.transform = 'translate(-50%, -50%)';
                    node.element.classList.remove('active');
                });
            }
            
            // Crea la griglia iniziale
            createGrid();
            
            // Aggiungi event listeners
            window.addEventListener('resize', createGrid);
            gridContainer.addEventListener('mousemove', handleMouseMove);
            gridContainer.addEventListener('mouseleave', handleMouseLeave);
        });
    </script>
</body>
</html>
